<template name="messageBubble">
	<li id="{{templatePrefix}}{{msg._id}}" data-id="{{msg._id}}" data-context={{actionContext}} class="messageBubble {{own}} {{attachmentsClass}}" data-username="{{msg.u.username}}" data-tmid="{{msg.tmid}}" data-date="{{date}}" data-timestamp="{{timestamp}}" data-alias="{{msg.alias}}">
		{{#unless shouldHideBody}}
			<div class="message-body-wrapper">
				<div class="body" dir="auto" data-unread-text="{{_ "Unread_Messages"}}">
					{{#if hasOembed}}
						{{#each msg.urls}}
							{{injectMessage . ../msg}}
							{{injectSettings . ../settings}}
							{{injectIndex . @index}}
							{{> oembedBaseWidget}}
						{{/each}}
					{{/if}}
					{{{body}}}
					{{#if hasAttachments}}
						{{> reactAttachments attachments=msg.attachments file=msg.file }}
					{{/if}}
					{{#if msg.location}}
						{{> messageLocation location=msg.location}}
					{{/if}}
				</div>
			</div>
			{{#with readReceipt}}
				<div class="read-receipt {{readByEveryone}}">
					{{> icon icon="check" }}
					{{> icon icon="check" }}
				</div>
			{{/with}}
		{{/unless}}
	</li>
</template>
